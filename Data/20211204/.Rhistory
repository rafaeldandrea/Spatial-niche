dat <- readRDS("C:/Users/rdand/Google Drive/GitHub/Spatial-niche/Data/20211204/20211204bci_clustering_analysis_consistent.rds")
library(tidyverse)
dat
dat |> pull(census) |> range()
dat |> select(-c(sp, group)) |> unique() |> ggplot(aes(d_cutoff,census, fill = number_of_groups)) + geom_tile()
dat |> mutate(number_of_groups = factor(number_of_groups)) |> select(-c(sp, group)) |> unique() |> ggplot(aes(d_cutoff,census, fill = number_of_groups)) + geom_tile()
dat |> filter(seed == 0) |> mutate(number_of_groups = factor(number_of_groups)) |> select(-c(sp, group)) |> unique() |> ggplot(aes(d_cutoff,census, fill = number_of_groups)) + geom_tile()
theme_set(theme_bw)
dat |> filter(seed == 0) |> mutate(number_of_groups = factor(number_of_groups)) |> select(-c(sp, group)) |> unique() |> ggplot(aes(d_cutoff,census, fill = number_of_groups)) + geom_tile()
theme_set(theme_bw())
dat |> filter(seed == 0) |> mutate(number_of_groups = factor(number_of_groups)) |> select(-c(sp, group)) |> unique() |> ggplot(aes(d_cutoff,census, fill = number_of_groups)) + geom_tile()
dat |> filter(seed == 0) |> mutate(number_of_groups = factor(number_of_groups)) |> select(-c(sp, group)) |> unique() |> ggplot(aes(d_cutoff,census, fill = number_of_groups)) + geom_tile() + theme(aspect.ratio = 1)
dat |> filter(seed > 0) |> pull(census) |> unique()
dat |> filter(seed > 0, d_cutoff == 30) |> pull(census) |> unique()
dat |> filter(seed == 0, d_cutoff == 20, census == 8)
dat |> filter(seed == 0, d_cutoff == 20, census == 8) |> pull(group) |> unique()
bcifullcensus <- readRDS("C:/Users/rdand/Google Drive/GitHub/Spatial-niche/Data/Manuscript-Data/bcifullcensus.rds")
bcifullcensus
bci_old = get(load('c:/users/rdand/OneDrive/desktop/bci.full.Rdata31Aug2012/bci.full7.rdata'))
bci_old = get(load('c:/users/rdand/OneDrive/desktop/bci.full.Rdata31Aug2012/bci.full7.rdata')) |> as_tibble()
bci_new = get(load('c:/users/rdand/OneDrive/desktop/bci.tree/bci.tree7.rdata')) |> as_tibble()
bci_old
bci_new
bci_old |> select(sp, gx, gy, dbh, census) |> drop_na() |> full_join(bci_new |> select(sp, gx, gy, dbh, census) |> drop_na(), by = 'sp')
bci_old |> select(sp, gx, gy, dbh) |> drop_na() |> full_join(bci_new |> select(sp, gx, gy, dbh) |> drop_na(), by = 'sp')
bci_old |> select(sp, gx, gy, dbh) |> drop_na()
bci_old |> pull(status) |> unique()
bci_old |> filter(!is.na(dbh)) |> pull(status) |> unique()
bci_old |> select(sp, gx, gy, dbh) |> drop_na()
bci_new |> select(sp, gx, gy, dbh) |> drop_na()
bci_old |> select(sp, gx, gy, dbh) |> drop_na() |> count(sp) |> full_join(bci_new |> select(sp, gx, gy, dbh) |> drop_na() |> count(sp), by = 'sp')
x = bci_old |> select(sp, gx, gy, dbh) |> drop_na() |> count(sp) |> full_join(bci_new |> select(sp, gx, gy, dbh) |> drop_na() |> count(sp), by = 'sp')
x |> ggplot(aes(n.x, n.y)) + geom_point() + geom_abline(slope = 1, intercept = 0) + scale_x_log10() + scale_y_log10()
x |> mutate(diff = n.y - n.x) |> ggplot(aes(n.x, diff)) + geom_point() + geom_abline(slope = 1, intercept = 0) + scale_x_log10() + scale_y_log10()
x |> mutate(diff = n.y - n.x) |> ggplot(aes(n.x, diff)) + geom_point() + geom_abline(slope = 1, intercept = 0)
x |> mutate(diff = n.y - n.x) |> ggplot(aes(n.x, diff)) + geom_point()
x |> mutate(diff = n.y - n.x) |> count(diff)
x |> mutate(diff = n.y - n.x, propdiff = diff / n.x) |> ggplot(aes(n.x, propdiff)) + geom_histogram()
x |> mutate(diff = n.y - n.x, propdiff = diff / n.x) |> ggplot(aes(propdiff)) + geom_histogram()
view(data)
source("C:/Users/rdand/Google Drive/GitHub/Spatial-niche/Code/code.R")
source("C:/Users/rdand/Google Drive/GitHub/Spatial-niche/Code/code.R")
